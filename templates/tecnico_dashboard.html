{% extends "base.html" %}

{% block title %}Mi Dashboard{% endblock %}

{% block content %}
<div class="main-content-card">
    <h1 class="text-3xl font-bold text-gray-800 mb-6">Mi Dashboard</h1>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8">
        <div class="bg-white rounded-lg shadow-md p-6 text-center">
            <h3 class="text-xl font-semibold text-gray-800 mb-2">Tareas Pendientes</h3>
            <p id="totalPendientes" class="text-5xl font-bold text-yellow-600">0</p>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6 text-center">
            <h3 class="text-xl font-semibold text-gray-800 mb-2">Tareas Completadas</h3>
            <p id="totalCompletadas" class="text-5xl font-bold text-green-600">0</p>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const userId = {{ session.id_usuario }}; // Obtener el ID del usuario de la sesiÃ³n
        fetch(`/api/tecnico_stats/${userId}`)
            .then(response => response.json())
            .then(data => {
                document.getElementById('totalPendientes').innerText = data.total_pendientes;
                document.getElementById('totalCompletadas').innerText = data.total_completadas;
            });
    });
</script>
{% endblock %}